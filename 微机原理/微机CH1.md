## 微型计算机原理与接口技术

[TOC]

#### 课程目的：

1. 了解微机的**工作原理**
2. 掌握微型机的硬件及各部件的**功能**与**组成原理**
3. 学会用汇编语言进行计算机**底层软件设计**，以及掌握计算机与其他辅助设备的**接口技术**的基本能力
4. 培养**软硬件开发能力**



#### 汇编语言的优缺点

- 优点
  1. 能够直接访问与硬件相关的存储器或I/O端口
  2. 不受编译器限制，完全控制生成的二进制代码
  3. 能根据特定应用对代码做最佳优化，提高运行速度
  4. 最大限度发挥硬件的功能
- 缺点
  1. 代码非常难懂，不好维护
  2. 容易产生bug，难于调试
  3. 只能针对特定的体系结构和处理器进行优化
  4. 开发效率很低，时间长且单调

### CHAP 1 微型计算机基础

####　学习重点

1. 掌握二进制数，十进制数，十六进制数和BCD码数之间的转换方法
2. 掌握真值数和补码数之间的转换方法
3. 牢记0～９，Ａ～Ｆ，回车符，换行符的ASCⅡ码
4. 掌握整数补码的运算方法，并对结果进行分析，深入理解有关进位和溢出的概念
5. 掌握微型计算机的硬件基本结构

#### 1.1 数制

1. 十进制数（D）：编程时使用
2. 二进制数（B）：计算机内部信息存储，运算，输入都是二进制数
3. 十六进制数（H）：四位二进制数表示一位十六进制数

| 4位二进制数 | 等值的十六进制数 | 4位二进制数 | 等值的十六进制数 |
| ----------- | :--------------: | :---------: | :--------------: |
| 0000        |        0         |    1000     |        8         |
| 0001        |        1         |    1001     |        9         |
| 0010        |        2         |    1010     |        A         |
| 0011        |        3         |    1011     |        B         |
| 0100        |        4         |    1100     |        C         |
| 0101        |        5         |    1101     |        D         |
| 0110        |        6         |    1110     |        E         |
| 0111        |        7         |    1111     |        F         |

4. BCD码：采用二进制数对每一位十进制数字进行编码来表示一个十进制数，这种数叫做BCD码

##### 数制转换

- 十进制整数→二进制数

  - 算法：除２取整，直到商为零为止 ，**倒排**

  - 例：
    $$
    (11)_{10}=(1011)_2
    $$
    

- 十进制数纯小数→二进制数

  - 算法:乘2取整,直到乘积的小数部分为0时止，**顺排**

  - 例：
    $$
    (0.8125)_{10}=(0.1101)_2
    $$
    

- 二进制、十进制、十六进制、BCD码之间的转换

  - 
    $$
    例：(1001 0111)_{BCD}= (97)_{10} = (0110 0001)_2
    $$
  
- 
    $$
    (129)_{10}= (1000,0001)_2 = (81)_{16}
    $$

#### 1.2数据的编码

##### 字符编码——ASCII码

用七位二进制编码来表示一个符号。


$$
因此有2^7=128个符号
$$

0～9的ASCⅡ码为    30H ～ 39H
A～F的ASCⅡ码为    41H ～ 46H
回车符的ASCⅡ码为  0DH
换行符的ASCⅡ码为  0AH

##### 码值

1. 真值和机器数的概念

   1. 真值：一个数的数值。

      - “+”表示正数，“-”表示负数
      - +101                -101

   2. 机器数：符号数值化。

      - 0表示“+”，1表示“-”

      - 0 XXX       1 XXX

   3. 字长：包括符号位在内的二进制数的位数

2. 机器数的三种表示方式

   1. 原码：最高位位符号位，数值部分为该数的绝对值
      - +23 ：**0**0010111
      -  -23 ：**1**0010111
   2. 反码：最高位为符号位，数值部分，正数为其绝对值，负数为其绝对值按位取反
      -  +23： **0**0010111
      -  -23：  **1**1101000
      - 0有两种反码表示：
        - +0 = 00000000
        -  -0 = 11111111
   3. 补码：最高位为符号位，正数同原码、反码，负数的数值部分为其绝对值**按位取反后末位加1**
      - +23反码 ：**0**0010111
      -  -23反码 ：**1**1101000
      -  -23补码 ：**1**1101001

##### :star: 小结

1. 机器数比真值数多一个符号位

2. 正数原、反、补码与真值数相同

3. 负数原码的数值部分与真值相同；

   负数反码的数值部分为真值数按位取反;

   负数补码的数值部分为真值数按位取反末位加1

4. 没有负零的补码，或者说负零的补码与正零的补码相同由于补码表示的机器数更适合运算，为此，**计算机系统中负数一律用补码表示**

5. 补码机器数的数值范围

   1. 字长为n位 真值范围为
      $$
      -2^{n-1}   ～  +2^{n-1} - 1
      $$

   2. n=8时  -128 ~ +127
   3. n=16时， -32768 ~ +32767





##### :star: 真值与机器数的转换（设字长为8）

1. 

$$
设[X]_补=(96)_{16},则x=( ? )_{10}
$$

$$
解：[x]_补=(96)_{16}=10010110
$$

$$
则x= -1101010=(-106)_{10}
$$

2. 

$$
设x=(-120)_{10},则[x]_补=(  ?  )_{16}
$$

$$
解：x=(100)_{10}=(+110,1100)_2
$$

$$
则[x]_补=(0110,1100)_2 =(6C)_{16}
$$



##### 整数补码的运算

1. “模”的概念：一个计量器的最大容量称为该计量器的“模”

   四位计数器能存0000~1111共16个数

   八位计数器能存0000 0000~1111 1111共256个数

   十六位计数器能存65536个数

2. 四位的加法器

![由四位全加器组成](..\img\1569674196180.png)

在上述加法器上进行:  0111 + 0110

7+6=13,进位为0
8+8=0,进位为1
进位为“1”，其值为16，就是四位加法器的“模”，它被运算器“丢失”了。 

3. :star:整数补码的加减运算
   $$
   （x+y）_补=（x）_补+（y）_补
   $$

   $$
   （x-y）_补=（x）_补+（-y）_补
   $$

   条件：

   1. 符号位参与运算

   2. 以2^n为模（n为字长）

   3. 当真值满足下列条件时，结果正确，否则结果错误
      $$
      －2^{n-1}  ≤ x, y, x+y ,x－y < +2^{n-1}
      $$

例：
$$
设x=(66)_{10}，y=(51)_{10},以2^8 为模，补码运算x+y
$$

##### 无符号数的概念

最高位不代表符号，仍为数值的一部分

##### 溢出与进位的概念

​	进位：运算后，最高位向更高位的进位值。
​	溢出：运算结果超出了运算器所能表示的范围

下列情况就发生了溢出：
  8位加法器，运算无符号数，结果≥ 256
  8位加法器，运算有符号数，结果 > +127，<－128
  16位加法器，运算无符号数，结果≥ 65536
$$
16位加法器，运算有符号数，结果 > 2^{15}-1,<-2^{15}
$$


###### 计算机怎样表示进位和溢出

![计算机怎样表示进位和溢出](..\img\1569675099285.png)

1. 运算器对有符号数和无符号数同样对待   
2. 最高位的进位值保存在“进位标志寄存器”中
3. 如加数与被加数的最高位相同，却与结果的最高 位相异，则将溢出标志置为1

###### 程序员然后判断溢出错

如果参与运算的数是**无符号数**，则判进位标志，**进位标志**=1，表示溢出错

如果参与运算的数是**有符号数**，则判溢出标志，**溢出标志**=1，表示溢出错。 

#### 1.3计算机系统的基本组成

##### 1.计算机系统组成

- 硬件：泛指设备而言

  - 主机箱
    - 中央处理器CPU（运算器、控制器）
    - 存储器系统
    - I/O接口
    - 电源系统
  - I/O设备

- 软件：泛指程序而言

  - 软件系统
  - 应用软件

  冯诺依曼计算机体系结构思想

  <img src="..\img\1569675635110.png" alt="冯诺依曼计算机体系结构思想" style="zoom:80%;" />

##### 2.微型机硬件结构

![微型机硬件结构](..\img\1569675742743.png)

1. 以CPU为核心通过3条总线连接存储器、I/O接口

   - CPU:即微处理器，是超大规模集成电路，内部集成了运算器、控制器、存储器管理部件……
   - 存储器:指系统的主存储器，简称为内存。用来存放程序、数据
   - :star:  I/O接口:是CPU和外部设备交换信息的“中转站”
   - I/O设备:如键盘、显示器、打印机……  

2. 总线:总线是CPU与存储器、I/O接口交换信息的公共通道。

   - 按总线上信息传输的物理意义，分为

     1. 地址总线：传输CPU访问存储器，访问I/O端口的地址信号。

        **通常是单线总线**

     2. 数据总线：传输CPU读/写内存，读写I/O端口时的数据。

        **通常是双向总线**

     3. 控制总线：CPU发出的控制命令，或外部向CPU提出的请求。

        **大部分是单向，少数是双向**

     

术语：

“读”：即输入,信息从外部→CPU　　　
“写”：即输出,信息从CPU→外部
“读内存”：从存储器取信息→CPU
“写内存”：信息写入存储器

##### 存储器基础知识

1. 分类

- 辅助存储器：磁盘、光盘
- 主存储器：RAM、ROM（EPROM）
- 高速缓冲存储器：静态RAM

从上往下，存储容量、存储周期 由大到小

1. RAM：随机存储器，即“内存”
2. ROM：只读存储器
3. ROM/EPROM在微机系统中的应用
   - 存放“基本输入/输出系统程序”（BIOS）
4. 高速缓冲存储器Cache



2. 存储器容量

存储器由若干“存储单元组成”，每一单元存放一个“字节”的信息

1字节即为8为二进制数

2字节即为1个“字”

4字节即为一个“双字”



1K容量为1024个单元

​		1 M=1024 K=1024*1024单元

3. 存储器地址与读写操作

   1. **存储器容量由地址线“宽度”决定：**

      - 1 M容量的存储器
      - 地址范围：00000 H ~ FFFFF Ｈ    由20根地址线提供地址码
      - 16 M    24根  
      - 4 G 32根

   2. **存储器读写示意**

      读写存储器，地址译码电路**“翻译”地址码**，从而**“选中”某一单元**，

      在**CPU的存储器读命令**的控制下**读出某一单元的内容**→数据线。

      在**存储器写命令**的控制下把数据线信息→某一个存储单元。

      

今后，在用汇编语言进行程序设计的时候，二进制数用后缀“B”表示，十六进制数及BCD码数用后缀“H”表示。
 如:
$$
(1010)_2 应写成1010B
$$

$$
(5A )_{16} 应写成5AH
$$

$$
(0111 ,1000)_{BCD}  应写成78H
$$

$$
(123)_{10} 应写成123
$$













